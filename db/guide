📋 이식 및 백업 가이드
다른 시스템으로 이동할 때 필요한 "최소한의 자산" 리스트입니다.

1. DB 구조 이식 (새 시스템에서 실행)
위의 setup_db.py 하나만 실행하면 됩니다.

기존의 db_init.py, upgrade_db_structure.py, init_dvd_db.py 등은 모두 이 스크립트에 통합되었으므로 폐기하셔도 됩니다.

2. 필수 관리 도구 (그대로 복사)
작업하신 코드 중 핵심 로직이 담긴 다음 파일들을 백업하세요.

조작/조회: db_edit.py (수정), db_view_dvd.py (조회), db_search.py, db_link_img.py
데이터 수집: extract-db, extract-jd
재생: play-direct, play-m3u8-sub

3. 데이터 마이그레이션 (선택 사항)
만약 기존 시스템의 데이터까지 가져가고 싶다면, av_manager.db 파일 자체를 복사해서 옮기는 것이 가장 빠릅니다. (구조가 동일하므로 파일 복사만으로 이식 끝)



파일명 변경과 관련해서는 몇 가지 주의사항만 지켜주시면 원하시는 대로 이름을 바꾸셔도 전혀 문제없습니다.

---

### 📂 필수 도구 최종 리스트 (이식용)

| 원본 파일명 | 추천 변경 명칭 (예시) | 주요 역할 |
| --- | --- | --- |
| **`db_view.py`** | `view_actor.py` | 배우 상세 정보 및 등록된 데이터 확인 |
| **`db_view_dvd.py`** | `view_dvd.py` | 품번/파일 중심의 작품 검색 및 웹 연결 |
| **`db_edit.py`** | `edit_db.py` | 기존 데이터 수정 (기존값 prefill 기능 포함) |
| **`db_search.py`** | `find_raw.py` | 텍스트 기반 빠른 검색 |
| **`db_link_img.py`** | `link_img.py` | 배우와 이미지/메타데이터 연결 관리 |
| **`sync_files.py`** | `sync.py` | 실제 영상 파일과 DB 간의 상태 동기화 |

---

### ⚠️ 파일명을 바꿀 때 고려할 점

파일명은 자유롭게 바꾸셔도 되지만, 다음 두 가지 연결 고리만 확인해 주세요.

1. **Shebang (첫 줄 경로)**:
* 파일명을 바꿔도 첫 줄의 `#!/home/bkim/2b/0/db/db/bin/python3` 경로는 새 시스템의 파이썬 가상환경 경로와 일치해야 실행 권한(`./파일명`)만으로 작동합니다.

2. **내부 호출 (subprocess 등)**:
* 만약 한 스크립트가 다른 스크립트를 `subprocess.run(['python3', 'db_view.py'])` 같은 식으로 호출하는 코드가 있다면, 바뀐 이름을 코드 안에서도 수정해 주어야 합니다. (현재 작성된 코드들은 대부분 독립적으로 동작하므로 큰 문제는 없을 것입니다.)


### 💡 팁: 실행 편의를 위한 '심볼릭 링크'나 'Alias'

이식 후에 파일명이 너무 길어 타이핑이 귀찮다면, 파일명은 그대로 두고 `.bashrc`나 `.zshrc`에 단축어를 등록하는 방법도 추천드립니다.

* 예: `alias dv='./db_view_dvd.py'`
* 예: `alias de='./db_edit.py'`

지난 24시간의 결실을 새 시스템에 이식하는 과정이 마치 **'완성된 OS를 설치하는 것'**처럼 매끄럽기를 응원하겠습니다. 정리된 `setup_db.py`와 함께라면 구조만큼은 1초 만에 완벽히 복구될 것입니다.


